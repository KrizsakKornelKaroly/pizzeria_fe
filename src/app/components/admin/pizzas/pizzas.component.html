<h3>Pizzák kezelése</h3>

<button class="btn btn-primary mb-3" data-bs-toggle="modal" data-bs-target="#formModal"><i class="bi bi-plus"></i>Új
  pizza hozzáadása</button>

<table class="table table-hover table-striped">
  <thead>
    <tr>
      <th>#</th>
      <th>Kép</th>
      <th>Megnevezés</th>
      <th>Leírás</th>
      <th class="text-end">Kalória</th>
      <th class="text-end">Ár</th>
      <th class="text-end">Műveletek</th>

    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let pizza of pagedPizzas; let i = index">
      <td>{{i+1}}</td>
      <td>{{pizza.image}}</td>
      <td>{{pizza.name}}</td>
      <td>{{pizza.description}}</td>
      <td class="text-end">{{pizza.calories | numberFormat}} kcal</td>
      <td class="text-end">{{pizza.price | numberFormat}} {{currency}}</td>
      <td class="text-end">
        <button class="btn btn-warning mr-2" title="Módosítás"><i class="bi bi-pen"
            (click)="getPizza(pizza.id)"></i></button>
        <button class="btn btn-danger" title="Törlés"><i class="bi bi-trash"
            (click)="confirmDelete(pizza.id)"></i></button>
      </td>
    </tr>
  </tbody>
  <tfoot>
    <tr>
      <td colspan="7">Összesen: <strong>{{pizzas.length}}</strong> rekord</td>
    </tr>
  </tfoot>
</table>

<nav aria-label="Page navigation example" *ngIf="totalPages > 1">
  <ul class="pagination">

    <li class="page-item">
      <a class="page-link" aria-label="Previous" (click)="setPage(currentPage - 1)" [class.disabled]="currentPage == 1">
        <span aria-hidden="true">&laquo;</span>
      </a>
    </li>

    <li class="page-item" *ngFor="let page of [].constructor(totalPages); let i = index" [class.active]="currentPage == (i + 1)">
      <a class="page-link" (click)="setPage(i+1)">{{i+1}}</a>
    </li>
    
    <li class="page-item">
      <a class="page-link" aria-label="Next" (click)="setPage(currentPage + 1)" [class.disabled]="currentPage == totalPages">
        <span aria-hidden="true">&raquo;</span>
      </a>
    </li>

  </ul>
</nav>

<!-- FormModal -->
<div class="modal fade" id="formModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
  aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="staticBackdropLabel" *ngIf="!editMode">Új pizza hozzáadása </h1>
        <h1 class="modal-title fs-5" id="staticBackdropLabel" *ngIf="editMode">Pizza módosítása</h1>
      </div>
      <div class="modal-body">
        <div class="form-floating mb-3">
          <input type="text" class="form-control" id="name" placeholder="Név" [(ngModel)]="pizza.name">
          <label for="name">Név <em>*</em></label>
        </div>

        <div class="form-floating mb-3">
          <input type="number" class="form-control" id="calories" placeholder="Kalóriaszám"
            [(ngModel)]="pizza.calories">
          <label for="calories">Kalóriaszám <em>*</em></label>
        </div>

        <div class="form-floating mb-3">
          <input type="number" class="form-control" id="price" placeholder="Ár" [(ngModel)]="pizza.price">
          <label for="price">Ár <em>*</em></label>
        </div>

        <div class="form-floating mb-3">
          <textarea class="form-control textarea" id="description" placeholder="Név"
            [(ngModel)]="pizza.description"></textarea>
          <label for="description">Leírás</label>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><i
            class="bi bi-x-circle"></i>&nbsp;Mégsem</button>
        <button type="button" class="btn btn-primary" (click)="save()"><i class="bi bi-floppy"></i>&nbsp;Mentés</button>
      </div>
    </div>
  </div>
</div>


<!-- ConfirmModal -->
<div class="modal fade" id="confirmModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
  aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="staticBackdropLabel">Megerősítés</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        Biztosan törölni szeretnéd a rekordot?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><i
            class="bi bi-x-circle"></i>&nbsp;Mégsem</button>
        <button type="button" class="btn btn-danger" (click)="delete(pizza.id)"><i
            class="bi bi-check-lg"></i>&nbsp;Törlés</button>
      </div>
    </div>
  </div>
</div>